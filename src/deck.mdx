import { CodeSurfer } from 'code-surfer';
import { Head, Appear, Notes, Image } from 'mdx-deck';
import { Box } from 'theme-ui';
import { Listed, Broke, Fronted, BackgroundImaged } from './layouts';
import { codeSurferTitle, Ul, Li, MetaList, GH } from './components';

import { theme as sqn } from './themes/sqn';

export const theme = sqn;

<Head>
	<title>React - best practices</title>
</Head>

<Fronted>

# React - best practices

## Ãšvod

- TomÃ¡Å¡ KonrÃ¡dy
- <a href="https://twitter.com/konnnyy">@konnnyy</a>
- <a href="https://konrady.cz">konrady.cz</a>

Pro <Box sx={{ display: "inline", color: 'primary' }}><a href="https://www.sqn.cz/cs/">SQN.cz</a></Box> 2020

<br />

</Fronted>

---

<Listed>

## O mÄ›

- [Lundegaard](https://zoe.lundegaard.ai)
- [SQN](https://sqn.cz)
- [Github <GH />](https://github.com/tommmyy)
- [Ramda-extension](https://github.com/tommmyy/ramda-extension)

</Listed>

<Notes>

- Doing JS professionaly about 8 years - era of jQuery and Backbone.
- Main focus is on FE development in React
- I love Ramda and Opensource ->Â Ramda-extension
- At Lundegaard over 3 and half years
- React Apps - banks, insurance, pÅ¯jÄkovnÃ­ systÃ©my
- Speaker - WebExpo, Czeck Lrf conference, React-Finland
- Browser analysis and AI prediction
- First issue - integrate React into Liferay 6

</Notes>

---

<Listed dense>

## Agenda

- Styling
- HoC
- Hooks
- Render prop
- State management
- Tooling
- Q&A

</Listed>

<Notes>

- Tooling?

</Notes>

---

<Broke>

# ProstÅ™edÃ­

</Broke>

---

```
~ node -v
v12.12.0

~ yarn -v
1.19.1
```

---

## Repo

[https://github.com/tommmyy/workshop-react-best-practices](https://github.com/tommmyy/workshop-react-best-practices)

<Notes>

- Show README
- Project Structure - Gatsby, packages,
- workshop - templates/Exercise, App

</Notes>

---

<Broke>

# Basic Component Patterns

</Broke>

---

<Listed>

## Code style

- Defaulting props
- Class vs Function
- Arrow vs. Function
- prop-types
- ...

</Listed>

---

# ğŸ’» Demo

### `Basic Patterns`

```
src/Demo
```

<Notes>

- InlineText pomocÃ­ `<ui-components/Text>`
- VystvÄ›tlit forwardRef

</Notes>

---

# ğŸ–Šï¸ Exercise

### [Basic patterns](https://github.com/tommmyy/workshop-react-best-practices/tree/master/exercises/exercise-basic-patterns)

<Notes>

- Refactor class component do naÅ¡eho codestyle

</Notes>

---

<Broke>

# Styling s Theme-UI

</Broke>

---

## CSS-in-JS

```js
<div style={{ padding: '8px' }}>
	<span style={{ fontSize: '1.7em' }}>text</span>
</div>
```

<Notes>

- NÃ¡Å¡ prvnÃ­ dÅ¯leÅ¾itÃ½ pattern
- React / JSX ideÃ¡lnÃ­ pro tento pattern
- nejjednoduÅ¡Å¡Ã­ implementace

</Notes>

---

# NevÃ½hody CSS

---

## Jeden namespace/scope

```
.item {
  // ...
}
```

---

## Jeden namespace/scope

```
.item {
  // ...
}

.page-1 .item {
  // override
}

.page-1 span.item {
  // override
}
```

---

## ImplicitnÃ­ zÃ¡vislosti 1/2

```css
button, input[type="button"], input[type="submit"]  {
  // ...
}
```

<Notes>

- Reuse css pravidel je komlexnÃ­ zÃ¡leÅ¾itost
- Å patnÄ› se udrÅ¾uje
- Oba vedou k monolitickÃ© architektuÅ™e, tÄ›Å¾kÃ© rozdÄ›lenÃ­ do subsystÃ©mÅ¯

</Notes>

---

## ImplicitnÃ­ zÃ¡vislosti 2/2

```html
<button class="inline disabled button">Click</button>
```

<Notes>

- Reuse css pravidel je komlexnÃ­ zÃ¡leÅ¾itost
- Å patnÄ› se udrÅ¾uje
- Oba vedou k monolitickÃ© architektuÅ™e, tÄ›Å¾kÃ© rozdÄ›lenÃ­ do subsystÃ©mÅ¯

</Notes>

---

## Decoupling coupled 1/2

```html
<style>
.toolbar { }
.toolbar-item { float: left; }
</style>

<div class="toolbar">
  <ul>
    <li class="toolbar-item">Item 1</li>
    <li class="toolbar-item">Item 2</li>
  </ul>
</div>
```

<Notes>

-  HTML je s CSS Ãºzce svÃ¡zÃ¡no - vztah nenÃ­ dostateÄnÄ› vyditelnÃ½.
-  NapÅ™Ã­klad pokud chci pouÅ¾Ã­t flex, je tÅ™eba aby items byly pÅ™Ã­mÃ½m potomkem

</Notes>

---

## Decoupling coupled 2/2

```html
<style>
.toolbar { display: flex; flex-direction: row; }
</style>

<div class="toolbar">
  <div class="toolbar-item">Item 1</div>
  <div class="toolbar-item">Item 2</div>
</div>
```

<Notes>
- pokud chci zmÄ›nit styly, je Äasto tÅ™eba mÄ›nit html
</Notes>

---

## DalÅ¡Ã­

- Deadcode
- NedeterministickÃ© poÅ™adÃ­ CSS pravidel

<Notes>

- a - sloÅ¾itÃ½ vztah CSS-HTML  nedovoluje eliminaci dead-code
- b - PÅ™echod z Page A -> B, vs Page B -> A

</Notes>

---

<Listed>

## CSS-in-JS Features

- ZapouzdÅ™enÃ­/komponentÃ¡rnost
- "Naming things is hard"
- Jeden jazyk

</Listed>

<Notes>

- ExplicitnÃ­ zÃ¡vislosti
- ExplicitnÃ­ vztah struktury se vzhledem
- SdÃ­lenÃ­ konfigurace/dat

</Notes>

---

<Listed>

## _Styled_ aneb DneÅ¡nÃ­ standard

- [princip](https://github.com/styled-components/styled-components#example)
- implementace: [emotion](https://emotion.sh/docs/introduction) / [styled-components](https://styled-components.com/)
- FYI - [tagged template literals](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#Tagged_templates)

</Listed>

---

<Listed>

## _Design-constraint_ systems

- [styled-system](https://styled-system.com/) / [system-ui](https://system-ui.com/)
- [Rebass](https://rebassjs.org/)

</Listed>

<Notes>

- styled-system - pro definici "constrait" systÃ©mÅ¯
- system-ui - Specifikace nastavenÃ­ "design-cons"-systemÅ¯ - jak mÃ¡ vypadat tÃ©ma
- Rebass - Rebass definuje konkrÃ©tnÃ­ design systÃ©m

</Notes>

---

<Broke>

# Theme-ui

</Broke>

---

<Listed>

## Theme-ui

- [NÃ¡slednÃ­k Rebass](https://github.com/rebassjs/rebass/issues/720#issuecomment-556064422)
- JednoduÅ¡e tÃ©movatelnÃ©
- Spousta primitivnÃ­ch komponent
- Podpora pro [mdx](https://mdxjs.com/)
- [theme-ui](https://theme-ui.com/home)

</Listed>

<Notes>

- vÃ­ce komponent neÅ¾ Rebass
- tÃ©movatelnÃ© - system-ui spec + extension na mdx a jsx
- vysvÄ›tlit mdx
- vysvÄ›tlit @jsx pragmu
- theme-ui

</Notes>

---

# ğŸ’» Demo

### `theme-ui`

<Notes>

- ukÃ¡zat nÄ›kterÃ© features theme-ui dle notes v DemoThemeUi

</Notes>

---

# ğŸ–Šï¸ Exercise

### [theme-ui](https://github.com/tommmyy/workshop-react-best-practices/tree/master/exercises/exercise-theme-ui)

<Notes>

- Grid Framework
- upozornit na `flexWrap` u Row
- POZOR: neukazovat jeÅ¡tÄ› solution-theme-ui/ExerciseWorkshopUI

</Notes>

---

# Pattern - Wrapping 3rd-party libs


---

<Listed dense>

## VÃ½hody

- Patches, bugfixes, customer specific needs na jednom mÃ­stÄ›
- UmoÅ¾Åˆuje (vÃ½/z)mÄ›nu implementace
- UmoÅ¾nÃ­ definovat vlastnÃ­ API

</Listed>

---

# ğŸ’» Demo

### `solution-theme-ui/ExerciseWorkshopUI`

---

# ğŸ’» Demo

### `solution-theme-ui/ExerciseSwitcherSolution`

<Notes>

- Pouze UkÃ¡zat

</Notes>

---

<Listed>

## Sources

- [Two steps forward, one step back](https://jxnblk.com/blog/two-steps-forward/)
- [React-Native?](https://github.com/system-ui/theme-ui/issues/170)
- [What is actually CSS-in-JS](https://medium.com/dailyjs/what-is-actually-css-in-js-f2f529a2757)

</Listed>

---

<Broke>

# Advanced Component Patterns

</Broke>

---

- HoC
- Hooks
- RenderProps

---

<Broke>

# High-order Components

</Broke>

<Notes>

## Demos & CviÄenÃ­

- withProps
- withFallback
- withSuspense

- withConnectedForm?

</Notes>

---

<Listed dense>

## HoC

- UmoÅ¾Åˆuje abstrakci spoleÄnÃ© funkcionality komponent
- Uutilities components
- Jeden z prvnÃ­ch rozÅ¡Ã­Å™enÃ½ch patternÅ¯
- PohÅ™beno odstavenÃ­m [`recompose`](https://github.com/acdlite/recompose/blob/master/docs/API.md) knihovny...
- ... ale stÃ¡le relevantÃ­ pro nÄ›kterÃ© problÃ©my!

</Listed>

---

# ğŸ’» Demo

### `HoC`

---

# ğŸ–Šï¸ Exercise

### [HoC](https://github.com/tommmyy/workshop-react-best-practices/tree/master/exercises/exercise-hoc)

---

<Broke>

# Hooks

</Broke>

<Notes>

- Refs
  - DOM, mergeRef, forwardRef
  - No-DOM - useInterval, useWebsocket
- ImeperativeHandle
- LayoutEffect

</Notes>

---

<Listed>

## Pravidla prÃ¡ce s hooky

- Volej hooky jen z top levelu komponenty
- Hooky volej jen z React komponent

</Listed>

---

# ğŸ’» Demo

### `hooks/StateDemo`

---

# ğŸ’» Demo

### `hooks/useInterval`

---

# ğŸ–Šï¸ Exercise

### [useWebsocket](https://github.com/tommmyy/workshop-react-best-practices/tree/master/exercises/exercise-hooks)
---

<Broke color="red">

# State management

</Broke>

---

# ğŸ’» Demo

### `state`

---

# ğŸ–Šï¸ Exercise

### [state](https://github.com/tommmyy/workshop-react-best-practices/tree/master/exercises/exercise-state)
---

<Broke>

# Render Props

</Broke>

---

# ğŸ’» Demo

### `render-prop`

---

# ğŸ–Šï¸ Exercise

### [render-prop](https://github.com/tommmyy/workshop-react-best-practices/tree/master/exercises/exercise-render-prop)

---

<Broke>

# Tooling

</Broke>

---

<Listed>

# MoÅ¾nÃ¡ znÃ¡te

- Prettier
- ESLint

</Listed>

---

<Listed>

# MoÅ¾nÃ¡ neznÃ¡te

- Storybook
- Husky
- Lintstaged
- Plop

</Listed>

<Notes>- fast-ai-gatsby-theme</Notes>

---

<Listed>

## DevStack

- create-react-app(https://github.com/facebook/create-react-app)
- neutrino(https://parceljs.org/getting_started.html)
- Next.js
- Gatsby
- VlastnÃ­ Å™eÅ¡enÃ­:

</Listed>

<Notes>- react-union-scripts</Notes>

---

<Listed dense>

## VlastnÃ­ Å™eÅ¡enÃ­?

- Je tÅ™eba znalost spoustu technologÃ­Ã­:
- babel/weppack/parcel/rollup/eslint/testing-libs...
- [Starters](https://www.javascriptstuff.com/react-starter-projects/)
- [react-starter-kit](https://github.com/kriasoft/react-starter-kit)

</Listed>

---

<Broke color="red">

# ZÃ¡vÄ›r

</Broke>

---

<Listed>

## DalÅ¡Ã­ tÃ©mata

- Perfomance
- FormulÃ¡Å™e
- AplikaÄnÃ­ stav
- Testing

</Listed>

---

<Broke>

# Q&A

</Broke>

---

<Broke color="red">

# ÄŒas na drobnÃ¡ tÃ©mata

</Broke>
