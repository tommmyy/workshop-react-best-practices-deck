import { CodeSurfer } from 'code-surfer';
import { Head, Appear, Notes, Image } from 'mdx-deck';
import { Box } from 'theme-ui';
import { Listed, Broke, Fronted, BackgroundImaged } from './layouts';
import { codeSurferTitle, Ul, Li, MetaList, GH } from './components';

import { theme as sqn } from './themes/sqn';

export const theme = sqn;

<Head>
	<title>React - best practices</title>
</Head>

<Fronted>

# React - best practices

## √övod

- Tom√°≈° Konr√°dy
- <a href="https://twitter.com/konnnyy">@konnnyy</a>
- <a href="https://konrady.cz">konrady.cz</a>

Pro <Box sx={{ display: "inline", color: 'primary' }}><a href="https://www.sqn.cz/cs/">SQN.cz</a></Box> 2020

<br />

</Fronted>

---

<Listed>

## O mƒõ

- [Lundegaard](https://zoe.lundegaard.ai)
- [SQN](https://sqn.cz)
- [Github <GH />](https://github.com/tommmyy)
- [Ramda-extension](https://github.com/tommmyy/ramda-extension)

</Listed>

<Notes>

- Doing JS professionaly about 8 years - era of jQuery and Backbone.
- Main focus is on FE development in React
- I love Ramda and Opensource ->¬†Ramda-extension
- At Lundegaard over 3 and half years
- React Apps - banks, insurance, p≈Øjƒçkovn√≠ syst√©my
- Speaker - WebExpo, Czeck Lrf conference, React-Finland
- Browser analysis and AI prediction
- First issue - integrate React into Liferay 6

</Notes>

---

<Listed dense>

## Agenda

- Styling
- HoC
- Hooks
- Render prop
- State management
- Tooling
- Q&A

</Listed>

<Notes>

- Tooling?

</Notes>

---

<Broke>

# Prost≈ôed√≠

</Broke>

---

```
~ node -v
v12.12.0

~ yarn -v
1.19.1
```

---

## Repo

[https://github.com/tommmyy/workshop-react-best-practices](https://github.com/tommmyy/workshop-react-best-practices)

<Notes>

- Show README
- Project Structure - Gatsby, packages,
- workshop - templates/Exercise, App

</Notes>

---

<Broke>

# Basic Component Patterns

</Broke>

---

<Listed>

## Code style

- Defaulting props
- Class vs Function
- Arrow vs. Function
- prop-types
- ...

</Listed>

---

# üíª Demo

### `Basic Patterns`

```
src/Demo
```

<Notes>

- InlineText pomoc√≠ `<ui-components/Text>`
- Vystvƒõtlit forwardRef

</Notes>

---

# üñäÔ∏è Exercise

### [Basic patterns](https://github.com/tommmyy/workshop-react-best-practices/tree/master/exercises/exercise-basic-patterns)

<Notes>

- Refactor class component do na≈°eho codestyle

</Notes>

---

<Broke>

# Styling s Theme-UI

</Broke>

---

## CSS-in-JS

```js
<div style={{ padding: '8px' }}>
	<span style={{ fontSize: '1.7em' }}>text</span>
</div>
```

<Notes>

- N√°≈° prvn√≠ d≈Øle≈æit√Ω pattern
- React / JSX ide√°ln√≠ pro tento pattern
- nejjednodu≈°≈°√≠ implementace

</Notes>

---

# Nev√Ωhody CSS

---

## Jeden namespace/scope

```
.item {
  // ...
}
```

---

## Jeden namespace/scope

```
.item {
  // ...
}

.page-1 .item {
  // override
}

.page-1 span.item {
  // override
}
```

---

## Implicitn√≠ z√°vislosti 1/2

```css
button, input[type="button"], input[type="submit"]  {
  // ...
}
```

<Notes>

- Reuse css pravidel je komlexn√≠ z√°le≈æitost
- ≈†patnƒõ se udr≈æuje
- Oba vedou k monolitick√© architektu≈ôe, tƒõ≈æk√© rozdƒõlen√≠ do subsyst√©m≈Ø

</Notes>

---

## Implicitn√≠ z√°vislosti 2/2

```html
<button class="inline disabled button">Click</button>
```

<Notes>

- Reuse css pravidel je komlexn√≠ z√°le≈æitost
- ≈†patnƒõ se udr≈æuje
- Oba vedou k monolitick√© architektu≈ôe, tƒõ≈æk√© rozdƒõlen√≠ do subsyst√©m≈Ø

</Notes>

---

## Decoupling coupled 1/2

```html
<style>
.toolbar { }
.toolbar-item { float: left; }
</style>

<div class="toolbar">
  <ul>
    <li class="toolbar-item">Item 1</li>
    <li class="toolbar-item">Item 2</li>
  </ul>
</div>
```

<Notes>

-  HTML je s CSS √∫zce sv√°z√°no - vztah nen√≠ dostateƒçnƒõ vyditeln√Ω.
-  Nap≈ô√≠klad pokud chci pou≈æ√≠t flex, je t≈ôeba aby items byly p≈ô√≠m√Ωm potomkem

</Notes>

---

## Decoupling coupled 2/2

```html
<style>
.toolbar { display: flex; flex-direction: row; }
</style>

<div class="toolbar">
  <div class="toolbar-item">Item 1</div>
  <div class="toolbar-item">Item 2</div>
</div>
```

<Notes>
- pokud chci zmƒõnit styly, je ƒçasto t≈ôeba mƒõnit html
</Notes>

---

## Dal≈°√≠

- Deadcode
- Nedeterministick√© po≈ôad√≠ CSS pravidel

<Notes>

- a - slo≈æit√Ω vztah CSS-HTML  nedovoluje eliminaci dead-code
- b - P≈ôechod z Page A -> B, vs Page B -> A

</Notes>

---

<Listed>

## CSS-in-JS Features

- Zapouzd≈ôen√≠/komponent√°rnost
- "Naming things is hard"
- Jeden jazyk

</Listed>

<Notes>

- Explicitn√≠ z√°vislosti
- Explicitn√≠ vztah struktury se vzhledem
- Sd√≠len√≠ konfigurace/dat

</Notes>

---

<Listed>

## _Styled_ aneb Dne≈°n√≠ standard

- [princip](https://github.com/styled-components/styled-components#example)
- implementace: [emotion](https://emotion.sh/docs/introduction) / [styled-components](https://styled-components.com/)
- FYI - [tagged template literals](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#Tagged_templates)

</Listed>

---

<Listed>

## _Design-constraint_ systems

- [styled-system](https://styled-system.com/) / [system-ui](https://system-ui.com/)
- [Rebass](https://rebassjs.org/)

</Listed>

<Notes>

- styled-system - pro definici "constrait" syst√©m≈Ø
- system-ui - Specifikace nastaven√≠ "design-cons"-system≈Ø - jak m√° vypadat t√©ma
- Rebass - Rebass definuje konkr√©tn√≠ design syst√©m

</Notes>

---

<Broke>

# Theme-ui

</Broke>

---

<Listed>

## Theme-ui

- [N√°sledn√≠k Rebass](https://github.com/rebassjs/rebass/issues/720#issuecomment-556064422)
- Jednodu≈°e t√©movateln√°
- Spousta primitivn√≠ch komponent
- [theme-ui](https://theme-ui.com/)
- Podpora pro mdx

</Listed>

---

# üíª Demo

### `theme-ui`

---

# üñäÔ∏è Exercise

### [theme-ui](https://github.com/tommmyy/workshop-react-best-practices/tree/master/exercises/exercise-theme-ui)

---

# Pattern - Wrapping 3rd-party libs

---

# üíª Demo

### `solution-theme-ui/ExerciseWorkshopUI`

---

<Listed>

## Sources

- [Two steps forward, one step back](https://jxnblk.com/blog/two-steps-forward/)
- [React-Native?](https://github.com/system-ui/theme-ui/issues/170)
- [What is actually CSS-in-JS](https://medium.com/dailyjs/what-is-actually-css-in-js-f2f529a2757)

</Listed>

---

<Broke>

# Advanced Component Patterns

</Broke>

---

- HoC
- Hooks
- RenderProps

---

<Broke>

# High-order Components

</Broke>

<Notes>

## Demos & Cviƒçen√≠

- withProps
- withFallback
- withSuspense

- withConnectedForm?

</Notes>

---

<Listed dense>

## HoC

- pro abstrakci spoleƒçn√© funkcionality komponent
- jeden z prvn√≠ch roz≈°√≠≈ôen√Ωch pattern≈Ø
- poh≈ôbeno odstaven√≠ `recompose` knihovny...
- ... ale st√°le relevant√≠ pro nƒõkter√© probl√©my!

</Listed>

---

# üíª Demo

### `HoC`

---

# üñäÔ∏è Exercise

### [HoC](https://github.com/tommmyy/workshop-react-best-practices/tree/master/exercises/exercise-hoc)

---

<Broke>

# Hooks

</Broke>

<Notes>

- Refs
  - DOM, mergeRef, forwardRef
  - No-DOM - useInterval, useWebsocket
- ImeperativeHandle
- LayoutEffect

</Notes>

---

<Listed>

## Pravidla pr√°ce s hooky

- Volej hooky jen z top levelu komponenty
- Hooky volej jen z React komponent

</Listed>

---

# üíª Demo

### `hooks/StateDemo`

---

# üíª Demo

### `hooks/useInterval`

---

# üñäÔ∏è Exercise

### [useWebsocket](https://github.com/tommmyy/workshop-react-best-practices/tree/master/exercises/exercise-hooks)
---

<Broke color="red">

# State management

</Broke>

---

# üíª Demo

### `state`

---

# üñäÔ∏è Exercise

### [state](https://github.com/tommmyy/workshop-react-best-practices/tree/master/exercises/exercise-state)
---

<Broke>

# Render Props

</Broke>

---

# üíª Demo

### `render-prop`

---

# üñäÔ∏è Exercise

### [render-prop](https://github.com/tommmyy/workshop-react-best-practices/tree/master/exercises/exercise-render-prop)

---

<Broke>

# Tooling

</Broke>

---

<Listed>

# Mo≈æn√° zn√°te

- Prettier
- ESLint

</Listed>

---

<Listed>

# Mo≈æn√° nezn√°te

- Storybook
- Husky
- Lintstaged
- Plop

</Listed>

<Notes>- fast-ai-gatsby-theme</Notes>

---

<Listed>

## DevStack

- create-react-app(https://github.com/facebook/create-react-app)
- neutrino(https://parceljs.org/getting_started.html)
- Next.js
- Gatsby
- Vlastn√≠ ≈ôe≈°en√≠:

</Listed>

<Notes>- react-union-scripts</Notes>

---

<Listed dense>

## Vlastn√≠ ≈ôe≈°en√≠?

- Je t≈ôeba znalost spoustu technolog√≠√≠:
- babel/weppack/parcel/rollup/eslint/testing-libs...
- [Starters](https://www.javascriptstuff.com/react-starter-projects/)
- [react-starter-kit](https://github.com/kriasoft/react-starter-kit)

</Listed>

---

<Broke color="red">

# Z√°vƒõr

</Broke>

---

<Listed>

## Dal≈°√≠ t√©mata

- Perfomance
- Formul√°≈ôe
- Aplikaƒçn√≠ stav
- Testing

</Listed>

---

<Broke>

# Q&A

</Broke>

---

<Broke color="red">

# ƒåas na drobn√° t√©mata

</Broke>
